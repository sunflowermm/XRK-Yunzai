# ========================================
# 系统监控配置（monitor）
# ========================================
# 浏览器实例、内存、CPU 与优化策略。未启用则相关监控不运行。
# 实际生效路径：data/server_bots/{port}/monitor.yaml
# ----------------------------------------
# 总开关与间隔
# ----------------------------------------
# enabled: 是否启用监控
enabled: true
# interval: 监控检查间隔（毫秒）
interval: 120000
# ----------------------------------------
# 浏览器进程监控
# ----------------------------------------
browser:
  # enabled: 是否启用浏览器实例监控
  enabled: true
  # maxInstances: 最大浏览器实例数
  maxInstances: 5
  # memoryThreshold: 内存占用超过该百分比（0～100）时触发处理
  memoryThreshold: 90
  # reserveNewest: 回收时是否保留最新实例
  reserveNewest: true
# ----------------------------------------
# 系统与 Node 内存
# ----------------------------------------
memory:
  # enabled: 是否启用内存监控
  enabled: true
  # systemThreshold: 系统内存占用超过该百分比时告警
  systemThreshold: 85
  # nodeThreshold: Node 进程内存占用超过该百分比时告警
  nodeThreshold: 85
  # autoOptimize: 是否自动触发优化（如 GC）
  autoOptimize: true
  # gcInterval: 建议 GC 间隔（毫秒）
  gcInterval: 600000
  leakDetection:
    # enabled: 是否启用内存泄漏检测
    enabled: true
    # threshold: 泄漏判定阈值（增长率等）
    threshold: 0.1
    # checkInterval: 检测间隔（毫秒）
    checkInterval: 300000
# ----------------------------------------
# CPU 监控
# ----------------------------------------
cpu:
  # enabled: 是否启用 CPU 监控
  enabled: true
  # threshold: CPU 使用率超过该百分比时告警
  threshold: 90
  # checkDuration: 持续超过该时长（毫秒）才触发
  checkDuration: 30000
# ----------------------------------------
# 优化与重启
# ----------------------------------------
optimize:
  # aggressive: 是否启用激进优化
  aggressive: false
  # autoRestart: 是否在达到条件时自动重启
  autoRestart: false
  # restartThreshold: 超过该使用率（0～100）时考虑重启
  restartThreshold: 95
# ----------------------------------------
# 报告
# ----------------------------------------
report:
  # enabled: 是否启用定期报告
  enabled: true
  # interval: 报告间隔（毫秒）
  interval: 3600000
